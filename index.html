<audio id="click" src="http://soundbible.com/mp3/Click2-Sebastian-759472264.mp3"></audio>
<div id="container">
  <button id="button">Start</button>
  <div id="tempoDisplay"></div>
  <div id="sliderContainer">
    <input id="tempoSlider" type="range" min="40" max="200">
  </div>
  <div id="metronome"></div>
  <div id="cover"></div>
</div>

<script>
  let stopped = true;
  let left = true;

  function delayFromTempo() {
    return (60/parseInt(tempoSlider.value)) * 1000
  }

  function playClick() {
    if (stopped) { return; }
    click.currentTime = 0;
    click.play();
    console.log('click')
    const degrees = left ? 30 : -30
    tempoSlider.style.transform = `rotate(${degrees}deg)`
    left = !left;
    setTimeout(playClick, delayFromTempo());
  }

  function onButtonClick() {
    stopped = !stopped;
    const label = stopped ? 'Start' : 'Stop';
    button.innerText = label;
    playClick();
  }

  function onTempoChange(event) {
    tempoDisplay.innerText = event.currentTarget.value;
    tempoSlider.style.transition = `transform ${delayFromTempo()}ms cubic-bezier(0.5,0,0.5,1)`;
  }

  button.addEventListener('click', onButtonClick);
  tempoSlider.addEventListener('input', onTempoChange);
  onTempoChange({ currentTarget: tempoSlider });
</script>

<style>
  #container {
    align-items: center;
    display: flex;
    flex-direction: column;
  }

  #sliderContainer {
    position: relative;
    transform: rotate(90deg);
    transform-origin: left;
    width: 400px;
  }

  #tempoSlider {
    bottom: 187px;
    left: 70px;
    position: absolute;
    transform-origin: right;
    transform: rotate(-30deg);
    width: 100%;
  }
  #metronome {
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDMxNyA2MDIiIHdpZHRoPSIzMTciIGhlaWdodD0iNjAyIj48ZGVmcz48cGF0aCBkPSJNMzE3IDYwMkwzMTcgNTgzLjE5TDIwOC4wMyAzNy42M0wxNjMuNDUgMEwxNTMuNTUgMEwxMDguOTcgMzcuNjNMMCA1ODMuMTlMMCA2MDJMMzE3IDYwMloiIGlkPSJhVzhUTU9sbUkiPjwvcGF0aD48cGF0aCBkPSJNMTk0IDU1TDI3NCA0MjZMMjY4LjUgNDI2TDE4Ny41IDU1TDE5NCA1NVoiIGlkPSJlUU1tUnN1UUkiPjwvcGF0aD48cGF0aCBkPSJNMTIxIDU3LjVMNTAgNDI2TDEyMSA1Ny41WiIgaWQ9ImExaFpMVEZiOGwiPjwvcGF0aD48L2RlZnM+PGc+PGc+PGc+PHVzZSB4bGluazpocmVmPSIjYVc4VE1PbG1JIiBvcGFjaXR5PSIxIiBmaWxsPSIjMmMyZDI4IiBmaWxsLW9wYWNpdHk9IjEiPjwvdXNlPjwvZz48Zz48dXNlIHhsaW5rOmhyZWY9IiNlUU1tUnN1UUkiIG9wYWNpdHk9IjEiIGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMSI+PC91c2U+PC9nPjxnPjxnPjx1c2UgeGxpbms6aHJlZj0iI2ExaFpMVEZiOGwiIG9wYWNpdHk9IjEiIGZpbGwtb3BhY2l0eT0iMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1vcGFjaXR5PSIxIj48L3VzZT48L2c+PC9nPjwvZz48L2c+PC9zdmc+);
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    height: 630px;
    width: 100vh;
  }
  #cover {
    background-color: #2c2d28;
    bottom: 184px;
    position: relative;
    height: 170px;
    width: 255px;
  }

  input[type=range] {
    -webkit-appearance: none;
    background: transparent;
    width: 100%;
  }
  input[type=range]:focus {
    outline: none;
  }
  input[type=range]::-webkit-slider-thumb {
    background-repeat: no-repeat;
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMjk5LjMgMjM0LjMgNDIuMzk5OTk5OTk5OTk5OTggNTIuMzk5OTk5OTk5OTk5OTgiIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCI+PGRlZnM+PHBhdGggZD0iTTMwMCAyMzVMMzQwIDI0NUwzNDAgMjc1TDMwMCAyODVMMzAwIDIzNVoiIGlkPSJnMTdyYURKUmFaIj48L3BhdGg+PC9kZWZzPjxnPjxnPjx1c2UgeGxpbms6aHJlZj0iI2cxN3JhREpSYVoiIG9wYWNpdHk9IjEiIGZpbGw9IiNhNWE4YTQiIGZpbGwtb3BhY2l0eT0iMSI+PC91c2U+PC9nPjwvZz48L3N2Zz4=);
    background-size: contain;
    -webkit-appearance: none;
    height: 40px;
    width: 50px;
    margin-top: -15px;
  }
  input[type=range]::-moz-range-thumb {
    border: none;
    background-color: transparent;
    background-repeat: no-repeat;
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMjk5LjMgMjM0LjMgNDIuMzk5OTk5OTk5OTk5OTggNTIuMzk5OTk5OTk5OTk5OTgiIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCI+PGRlZnM+PHBhdGggZD0iTTMwMCAyMzVMMzQwIDI0NUwzNDAgMjc1TDMwMCAyODVMMzAwIDIzNVoiIGlkPSJnMTdyYURKUmFaIj48L3BhdGg+PC9kZWZzPjxnPjxnPjx1c2UgeGxpbms6aHJlZj0iI2cxN3JhREpSYVoiIG9wYWNpdHk9IjEiIGZpbGw9IiNhNWE4YTQiIGZpbGwtb3BhY2l0eT0iMSI+PC91c2U+PC9nPjwvZz48L3N2Zz4=);
    background-size: contain;
    -webkit-appearance: none;
    height: 40px;
    width: 50px;
  }

  input[type=range]::-webkit-slider-runnable-track {
    background: #a5a8a4;
    height: 8px;
  }
  input[type=range]::-moz-range-track {
    background: #a5a8a4;
    height: 8px;
  }
</style>
